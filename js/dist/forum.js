module.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=13)}([function(e,t){e.exports=flarum.core.compat["forum/app"]},function(e,t){e.exports=flarum.core.compat["common/extend"]},function(e,t){e.exports=flarum.core.compat["flags/forum/components/FlagPostModal"]},function(e,t){e.exports=flarum.core.compat["utils/withAttr"]},function(e,t){e.exports=flarum.core.compat["utils/Stream"]},function(e,t){e.exports=flarum.extensions["fof-merge-discussions"]},function(e,t){e.exports=flarum.core.compat["forum/states/GlobalSearchState"]},function(e,t,r){"use strict";var n=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,a=0,o=t.length;a<o;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.isTraversal=void 0;var a=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,o=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,s=new Map([["~","element"],["^","start"],["$","end"],["*","any"],["!","not"],["|","hyphen"]]),i={">":"child","<":"parent","~":"sibling","+":"adjacent"},l={"#":["id","equals"],".":["class","element"]},c=new Set(["has","not","matches","is","where","host","host-context"]),u=new Set(n(["descendant"],Object.keys(i).map((function(e){return i[e]})),!0)),f=new Set(["accept","accept-charset","align","alink","axis","bgcolor","charset","checked","clear","codetype","color","compact","declare","defer","dir","direction","disabled","enctype","face","frame","hreflang","http-equiv","lang","language","link","media","method","multiple","nohref","noresize","noshade","nowrap","readonly","rel","rev","rules","scope","scrolling","selected","shape","target","text","type","valign","valuetype","vlink"]);function p(e){return u.has(e.type)}t.isTraversal=p;var d=new Set(["contains","icontains"]),h=new Set(['"',"'"]);function m(e,t,r){var n=parseInt(t,16)-65536;return n!=n||r?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)}function v(e){return e.replace(o,m)}function g(e){return" "===e||"\n"===e||"\t"===e||"\f"===e||"\r"===e}function y(e,t){if(e.length>0&&0===t.length)throw new Error("Empty sub-selector");e.push(t)}t.default=function(e,t){var r=[],n=function e(t,r,n,o){var u,m;void 0===n&&(n={});var b=[],w=!1;function A(e){var t=r.slice(o+e).match(a);if(!t)throw new Error("Expected name, found "+r.slice(o));var n=t[0];return o+=e+n.length,v(n)}function x(e){for(;g(r.charAt(o+e));)e++;o+=e}function _(e){for(var t=0;"\\"===r.charAt(--e);)t++;return 1==(1&t)}function j(){if(b.length>0&&p(b[b.length-1]))throw new Error("Did not expect successive traversals.")}x(0);for(;""!==r;){var O=r.charAt(o);if(g(O))w=!0,x(1);else if(O in i)j(),b.push({type:i[O]}),w=!1,x(1);else if(","===O){if(0===b.length)throw new Error("Empty sub-selector");t.push(b),b=[],w=!1,x(1)}else if(r.startsWith("/*",o)){var S=r.indexOf("*/",o+2);if(S<0)throw new Error("Comment was not terminated");o=S+2}else if(w&&(j(),b.push({type:"descendant"}),w=!1),O in l){var C=l[O],P=C[0],E=C[1];b.push({type:"attribute",name:P,action:E,value:A(1),namespace:null,ignoreCase:!!n.xmlMode&&null})}else if("["===O){x(1);var k=null;"|"===r.charAt(o)&&(k="",o+=1),r.startsWith("*|",o)&&(k="*",o+=2);var M=A(0);null===k&&"|"===r.charAt(o)&&"="!==r.charAt(o+1)&&(k=M,M=A(1)),(null!==(u=n.lowerCaseAttributeNames)&&void 0!==u?u:!n.xmlMode)&&(M=M.toLowerCase()),x(0);E="exists";var q=s.get(r.charAt(o));if(q){if(E=q,"="!==r.charAt(o+1))throw new Error("Expected `=`");x(2)}else"="===r.charAt(o)&&(E="equals",x(1));var D="",L=null;if("exists"!==E){if(h.has(r.charAt(o))){for(var F=r.charAt(o),N=o+1;N<r.length&&(r.charAt(N)!==F||_(N));)N+=1;if(r.charAt(N)!==F)throw new Error("Attribute value didn't end");D=v(r.slice(o+1,N)),o=N+1}else{for(var W=o;o<r.length&&(!g(r.charAt(o))&&"]"!==r.charAt(o)||_(o));)o+=1;D=v(r.slice(W,o))}x(0);var T=r.charAt(o);"s"===T||"S"===T?(L=!1,x(1)):"i"!==T&&"I"!==T||(L=!0,x(1))}if(n.xmlMode||null!=L||(L=f.has(M)),"]"!==r.charAt(o))throw new Error("Attribute selector didn't terminate");o+=1;var R={type:"attribute",name:M,action:E,value:D,namespace:k,ignoreCase:L};b.push(R)}else if(":"===O){if(":"===r.charAt(o+1)){b.push({type:"pseudo-element",name:A(2).toLowerCase()});continue}var z=A(1).toLowerCase(),B=null;if("("===r.charAt(o))if(c.has(z)){if(h.has(r.charAt(o+1)))throw new Error("Pseudo-selector "+z+" cannot be quoted");if(o=e(B=[],r,n,o+1),")"!==r.charAt(o))throw new Error("Missing closing parenthesis in :"+z+" ("+r+")");o+=1}else{for(var I=o+=1,U=1;U>0&&o<r.length;o++)"("!==r.charAt(o)||_(o)?")"!==r.charAt(o)||_(o)||U--:U++;if(U)throw new Error("Parenthesis not matched");if(B=r.slice(I,o-1),d.has(z)){var $=B.charAt(0);$===B.slice(-1)&&h.has($)&&(B=B.slice(1,-1)),B=v(B)}}b.push({type:"pseudo",name:z,data:B})}else{k=null;var G=void 0;if("*"===O)o+=1,G="*";else{if(!a.test(r.slice(o)))return b.length&&"descendant"===b[b.length-1].type&&b.pop(),y(t,b),o;"|"===r.charAt(o)&&(k="",o+=1),G=A(0)}"|"===r.charAt(o)&&(k=G,"*"===r.charAt(o+1)?(G="*",o+=2):G=A(1)),"*"===G?b.push({type:"universal",namespace:k}):((null!==(m=n.lowerCaseTags)&&void 0!==m?m:!n.xmlMode)&&(G=G.toLowerCase()),b.push({type:"tag",name:G,namespace:k}))}}return y(t,b),o}(r,""+e,t,0);if(n<e.length)throw new Error("Unmatched selector: "+e.slice(n));return r}},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.stringify=t.parse=void 0,a(r(7),t);var s=r(7);Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return o(s).default}});var i=r(12);Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return o(i).default}})},function(e,t){e.exports=flarum.core.compat["components/Post"]},function(e,t){e.exports=flarum.core.compat["common/components/Link"]},function(e,t){e.exports=flarum.core.compat["common/helpers/icon"]},function(e,t,r){"use strict";var n=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,a=0,o=t.length;a<o;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});var a={equals:"",element:"~",start:"^",end:"$",any:"*",not:"!",hyphen:"|"},o=new Set(n(n([],Object.keys(a).map((function(e){return a[e]})).filter(Boolean),!0),[":","[","]"," ","\\","(",")","'"],!1));function s(e){return e.map(i).join(", ")}function i(e){return e.map(l).join("")}function l(e){switch(e.type){case"child":return" > ";case"parent":return" < ";case"sibling":return" ~ ";case"adjacent":return" + ";case"descendant":return" ";case"universal":return u(e.namespace)+"*";case"tag":return c(e);case"pseudo-element":return"::"+f(e.name);case"pseudo":return null===e.data?":"+f(e.name):"string"==typeof e.data?":"+f(e.name)+"("+f(e.data)+")":":"+f(e.name)+"("+s(e.data)+")";case"attribute":if("id"===e.name&&"equals"===e.action&&!e.ignoreCase&&!e.namespace)return"#"+f(e.value);if("class"===e.name&&"element"===e.action&&!e.ignoreCase&&!e.namespace)return"."+f(e.value);var t=c(e);return"exists"===e.action?"["+t+"]":"["+t+a[e.action]+"='"+f(e.value)+"'"+(e.ignoreCase?"i":!1===e.ignoreCase?"s":"")+"]"}}function c(e){return""+u(e.namespace)+f(e.name)}function u(e){return null!==e?("*"===e?"*":f(e))+"|":""}function f(e){return e.split("").map((function(e){return o.has(e)?"\\"+e:e})).join("")}t.default=s},function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(1),s=r(2),i=r.n(s),l=r(8);function c(e,t,r){return function e(t,r,n){var a;a=Array.isArray(t)?t:[t];var o=void 0;a.some((function(t){if("boolean"==typeof t||"number"==typeof t||"string"==typeof t||null==t)return!1;if(Array.isArray(t)){var a=e(t,r,n);return!!a&&(o=a,!0)}if(function(e,t){return t.some((function(t){return t.every((function(t){var r,n,a,o;switch(t.type){case"tag":return e.tag===t.name;case"attribute":if(!e.attrs)return!1;"class"===t.name&&(t.name="className");var s=e.attrs[t.name];switch("className"===t.name&&"string"==typeof s&&(s=s.trim()),t.ignoreCase&&"string"==typeof s&&(s=s.toLowerCase(),t.value=t.value.toLowerCase()),t.action){case"exists":return e.attrs.hasOwnProperty(t.name);case"equals":return s===t.value;case"start":return(null==(r=s)||null==r.startsWith?void 0:r.startsWith(t.value))||!1;case"end":return(null==(n=s)||null==n.endsWith?void 0:n.endsWith(t.value))||!1;case"element":return(null==(a=s)||null==a.split||null==(o=a.split(" "))||null==o.includes?void 0:o.includes(t.value))||!1}}return!1}))}))}(t,r))return o=t,!0;if(Array.isArray(t.children)){var s=e(t.children,r);return!!s&&(o=s,!0)}return!1})),n&&o&&n(o);return o}(e,Object(l.parse)(t),r)}var u=r(3),f=r.n(u),p=r(4),d=r.n(p),h=r(9),v=r.n(h),g=r(10),y=r.n(g),b=r(11),w=r.n(b),A=r(5),x=r(6),_=r.n(x);a.a.initializers.add("blomstra/flag-duplicates",(function(){i.a.prototype.flagReasons||Object(o.extend)(i.a.prototype,"content",(function(e){var t,r=this;1===(null==(t=this.attrs.post)?void 0:t.number())&&c(e,".Form-group",(function(e){var t=r.attrs.post.discussion();r.search=new _.a,e.children[0].children.splice(3,0,m("label",{className:"checkbox"},m("input",{type:"radio",name:"reason",checked:"duplicate"===r.reason(),value:"duplicate",onclick:f()("value",r.reason)}),m("strong",null,a.a.translator.trans("blomstra-flag-duplicates.forum.flags.reason_duplicate_label")),a.a.translator.trans("blomstra-flag-duplicates.forum.flags.reason_duplicate_text"),"duplicate"===r.reason()?m(A.components.DiscussionSearch,{state:r.search,onSelect:function(e){r.reasonDetail=d()(e.id())}.bind(r),ignore:t.id()}):""))}))})),Object(o.extend)(i.a.prototype,"flagReasons",(function(e){var t,r=this;if(1===(null==(t=this.attrs.post)?void 0:t.number())){var n=this.attrs.post.discussion();this.search=new _.a,e.add("duplicate",m("label",{className:"checkbox"},m("input",{type:"radio",name:"reason",checked:"duplicate"===this.reason(),value:"duplicate",onclick:f()("value",this.reason)}),m("strong",null,a.a.translator.trans("blomstra-flag-duplicates.forum.flags.reason_duplicate_label")),a.a.translator.trans("blomstra-flag-duplicates.forum.flags.reason_duplicate_text"),"duplicate"===this.reason()?m(A.components.DiscussionSearch,{state:this.search,onSelect:function(e){r.reasonDetail=d()(e.id())}.bind(this),ignore:n.id()}):""),100)}})),Object(o.override)(v.a.prototype,"flagReason",(function(e,t){var r=e(t);if("duplicate"===(null==t||null==t.reason?void 0:t.reason())){var n=t.reasonDetail(),o=a.a.forum.attribute("baseUrl")+"/d/"+n;return r[1]=m("span",{className:"Post-flagged-detail"},m(y.a,{href:o,external:!0,target:"_blank"},a.a.translator.trans("blomstra-flag-duplicates.forum.flags.duplicate_discussion")," ",w()("fas fa-external-link-alt")," ")),r}return r}))}))}]);
//# sourceMappingURL=forum.js.map